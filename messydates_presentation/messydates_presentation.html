<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Messydates</title>
    <meta charset="utf-8" />
    <meta name="author" content="James Hollway and Henrique Sposito" />
    <meta name="date" content="2023-05-23" />
    <script src="messydates_presentation_files/header-attrs/header-attrs.js"></script>
    <link href="messydates_presentation_files/remark-css/default.css" rel="stylesheet" />
    <link href="messydates_presentation_files/remark-css/ninjutsu.css" rel="stylesheet" />
    <link href="messydates_presentation_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="messydates_presentation_files/tile-view/tile-view.js"></script>
    <link href="messydates_presentation_files/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="messydates_presentation_files/panelset/panelset.css" rel="stylesheet" />
    <script src="messydates_presentation_files/panelset/panelset.js"></script>
    <script type="application/json" id="xaringanExtra-editable-docid">{"id":"bec9fbeadfcf42ec8d2ca2545245ac0a","expires":14}</script>
    <script src="messydates_presentation_files/himalaya/himalaya.js"></script>
    <script src="messydates_presentation_files/js-cookie/js.cookie.js"></script>
    <link href="messydates_presentation_files/editable/editable.css" rel="stylesheet" />
    <script src="messydates_presentation_files/editable/editable.js"></script>
    <script src="messydates_presentation_files/clipboard/clipboard.min.js"></script>
    <link href="messydates_presentation_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="messydates_presentation_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="messydates_presentation_files/shareon/shareon.min.css" rel="stylesheet" />
    <script src="messydates_presentation_files/shareon/shareon.min.js"></script>
    <link href="messydates_presentation_files/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="messydates_presentation_files/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="messydates_presentation_files/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script src="messydates_presentation_files/kePrint/kePrint.js"></script>
    <link href="messydates_presentation_files/lightable/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/messy-xaringan-style.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Messydates
]
.subtitle[
## Working with unspecified, approximate, uncertain, sets and ranges of dates
]
.author[
### James Hollway and Henrique Sposito
]
.date[
### 23 May 2023
]

---





class: center, middle

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2020/08/05/05/19/problem-5464444_1280.jpg)**Problem**]]

--

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2016/03/31/18/47/fist-1294633_1280.png)**Politics**]]

--

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2017/02/16/13/42/box-2071537_1280.png)**Package**]]

---

class: center, middle

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2020/08/05/05/19/problem-5464444_1280.jpg)**Problem**]]

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2016/03/31/18/47/fist-1294633_1280.png)**Politics**]]

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2017/02/16/13/42/box-2071537_1280.png)**Package**]]

---

# The problem of consideration

--

- Dates are often "messy", that is, measured or recorded imprecisely

--

- Imprecision can be inescapable and it is not by itself an issue, the issue is how it is treated (e.g. forced precision) without much consideration

--

- This can introduce biases where sequencing or duration are theoretically important and obscure inferential uncertainties

---

# The problem of precision

--

- Unspecified (e.g. "2012-01")

- Uncertain (e.g. "2012-01-12?")

- Approximate (e.g. "2012-01-12~")

- Ranges (e.g. "2012-01-12:2012-12-01")

- Sets (e.g. "2012-01-12, 2012-12-01")

---
  
# The problem of parsing

--

- Historical (e.g. "33 BC")

- Unusual (e.g. "2021-31-10")

- Written (e.g. "Twelfth January two thousand twelve")

- Inconsistent (e.g. "31-10/2021")

- Future (e.g. "9999-12-12")

---

class: center, middle

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2020/08/05/05/19/problem-5464444_1280.jpg)**Problem**]]

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2016/03/31/18/47/fist-1294633_1280.png)**Politics**]]

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2017/02/16/13/42/box-2071537_1280.png)**Package**]]

---

# The politics of aggregation

--

- Freeman (1989) highlights biases and inconsistencies related to temporal aggregation that cause model misspecification and misinterpretation (e.g. results differ when data is aggregated by year vs. months)

--

- However, this assumes that time in itself is "tidy"

--

- False temporal aggregation in itself might lead to both model misspecification and misinterpretation for time-series/events data

---

# The politics of (dis)aggregation

Types of temporal aggregation issues:

--

- False temporal precision (e.g. forced precision)

--

- False temporal variation (e.g. distorted change)

--

- False temporal duration (e.g. wrong intervals)

--

- False temporal estimation (e.g. faulty translation)

---

class: center, middle

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2020/08/05/05/19/problem-5464444_1280.jpg)**Problem**]]

.pull-1[.squareoff[![](https://cdn.pixabay.com/photo/2016/03/31/18/47/fist-1294633_1280.png)**Politics**]]

.pull-1[.squareon[![](https://cdn.pixabay.com/photo/2017/02/16/13/42/box-2071537_1280.png)**Package**]]

---

# The package

[messydates](https://globalgov.github.io/messydates/) implements the ISO 8601-2:2019(E) to provide a set of tools for constructing and coercing into and from the "mdate" class that allows dates to express unspecified, approximate or uncertain date components, date ranges, and sets of dates.

*Problems of precision can be explicitly 'resolved':*


```r
library(messydates)
paste0("Should we use the first day ",
       as.Date(as_messydate("2023"), min),
       " or any random day ",
       as.Date(as_messydate("2023"), random),
       " from the year of ",
       as_messydate("2023"))
```

```
#&gt; [1] "Should we use the first day 2023-01-01 or any random day 2023-12-08 from the year of 2023"
```

---

# Parse away with messydates

&lt;table class="table table-striped" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Example &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; OriginalDate &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lubridate &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; messydates &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Historical date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 33 BC &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; -0033 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Unusual date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2021-31-10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2021-10-31 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Written date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; First of February, two thousand and twenty-one &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2021-02-01 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Approximate date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2012-01-12~ &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2012-01-12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2012-01-12~ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Uncertain date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2001-01-01? &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2001-01-01 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2001-01-01? &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Unspecified date &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2012-01 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2020-12-01 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2012-01 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Range of dates &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-01:2020-01-01 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-01 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2019-11-01..2020-01-01 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Set of dates &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2021-5-26, 2021-11-19, 2021-12-4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt;  &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; {2021-05-26,2021-11-19,2021-12-04} &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Messy example

.panelset[
.panel[.panel-name[Code]

```r
set.seed(1301)
battles &lt;- battles %&gt;%
  mutate(arbitrary = as.numeric(as.Date(Date, max) - as.Date(Date, min)),
         random = ifelse(is_uncertain(Date)|is_approximate(Date),
                         abs(as.Date(Date, random) - as.Date(Date, random)),
                         arbitrary))
arbitrary &lt;- lm(arbitrary ~ US_party + N_actors, battles)
random &lt;- lm(random ~ US_party + N_actors, battles)
```
]
.panel[.panel-name[Table]

&lt;table style="text-align:center"&gt;&lt;tr&gt;&lt;td colspan="3" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;arbitrary&lt;/td&gt;&lt;td&gt;random&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(1)&lt;/td&gt;&lt;td&gt;(2)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="3" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="text-align:left"&gt;US_PARTY&lt;/td&gt;&lt;td&gt;10.802&lt;/td&gt;&lt;td&gt;-1.410&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(14.399)&lt;/td&gt;&lt;td&gt;(4.528)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;N_ACTORS&lt;/td&gt;&lt;td&gt;-2.479&lt;/td&gt;&lt;td&gt;1.660&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(7.239)&lt;/td&gt;&lt;td&gt;(2.276)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;CONSTANT&lt;/td&gt;&lt;td&gt;8.815&lt;/td&gt;&lt;td&gt;0.538&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;/td&gt;&lt;td&gt;(16.241)&lt;/td&gt;&lt;td&gt;(5.107)&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;Observations&lt;/em&gt;&lt;/td&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;20&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;R-squared&lt;/em&gt;&lt;/td&gt;&lt;td&gt;0.040&lt;/td&gt;&lt;td&gt;0.039&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;Adjusted R-squared&lt;/em&gt;&lt;/td&gt;&lt;td&gt;-0.073&lt;/td&gt;&lt;td&gt;-0.074&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;Residual standard error&lt;/em&gt; (df = 17)&lt;/td&gt;&lt;td&gt;19.467&lt;/td&gt;&lt;td&gt;6.121&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;F statistic&lt;/em&gt; (df = 2; 17)&lt;/td&gt;&lt;td&gt;0.352&lt;/td&gt;&lt;td&gt;0.345&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td colspan="3" style="border-bottom: 1px solid black"&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style="text-align:left"&gt;&lt;em&gt;Notes:&lt;/em&gt;&lt;/td&gt;&lt;td colspan="2" style="text-align:left"&gt;&lt;sup&gt;***&lt;/sup&gt;p &lt; .01; &lt;sup&gt;**&lt;/sup&gt;p &lt; .05; &lt;sup&gt;*&lt;/sup&gt;p &lt; .1&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
]
]

---

# Questions (for you)

- Implications

Why do you think this is important for research?

- Data

Do you know any data that is imprecise and we can use as a case study?

- Audience

How/where to convey this information to social scientists?

---

# Questions (for us)?

![100%](https://media.giphy.com/media/kBMQvQ27ax17nGj1v6/giphy.gif)

.pull-right[

*Thank you!*

]

---

# References

NULL
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="assets/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>`"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
