<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Annotates messy dates for uncertainty and/or approximation — annotate • messydates</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Annotates messy dates for uncertainty and/or approximation — annotate"><meta property="og:description" content='Some datasets have for example an arbitrary cut off point
for start and end points, but these are often coded as precise dates
when they are not necessarily the real start or end dates.
This collection of functions helps annotate uncertainty and
approximation to dates according to ISO2019E standards.
Inaccurate start or end dates can be represented by an affix
indicating "on or before", if used as a prefix (e.g. ..1816-01-01),
or indicating "on or after", if used as a suffix (e.g. 2016-12-31..).
Approximate dates are indicated by adding a ~ to year,
month, or day components, as well as groups of components or whole dates
to estimate values that are possibly correct (e.g. 2003-03-03~).
Day, month, or year, uncertainty can be indicated by adding a ?
to a possibly dubious date (e.g. 1916-10-10?) or date
component (e.g. 1916-?10-10).'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">messydates</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/messydates_intro.html">Working with messy dates</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Annotates messy dates for uncertainty and/or approximation</h1>
    
    <div class="hidden name"><code>annotate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Some datasets have for example an arbitrary cut off point
for start and end points, but these are often coded as precise dates
when they are not necessarily the real start or end dates.
This collection of functions helps annotate uncertainty and
approximation to dates according to ISO2019E standards.
Inaccurate start or end dates can be represented by an affix
indicating "on or before", if used as a prefix (e.g. ..1816-01-01),
or indicating "on or after", if used as a suffix (e.g. 2016-12-31..).
Approximate dates are indicated by adding a <code>~</code> to year,
month, or day components, as well as groups of components or whole dates
to estimate values that are possibly correct (e.g. 2003-03-03~).
Day, month, or year, uncertainty can be indicated by adding a <code>?</code>
to a possibly dubious date (e.g. 1916-10-10?) or date
component (e.g. 1916-?10-10).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">on_or_before</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>

<span class="fu">on_or_after</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>

<span class="fu">as_approximate</span><span class="op">(</span><span class="va">x</span>, component <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">as_uncertain</span><span class="op">(</span><span class="va">x</span>, component <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A date vector</p></dd>
<dt>component</dt>
<dd><p>Annotation can be added on specific date components
("year", "month" or "day"), or to groups of date components (month and
day ("md"), or year and month ("ym")). This must be specified.
If unspecified, annotation will be added after the date (e.g. 1916-10-10?),
indicating the whole date is uncertain or approximate.
For specific date components, uncertainty or approximation is annotated to
the left of the date component.
E.g. for "day": 1916-10-?10 or 1916-10-~10.
For groups of date components, uncertainty or approximation is annotated to
the right of the group ("ym") or to both components ("md").
E.g. for "ym": 1916-10~-10; for "md": 1916-?10-?10.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A messydt object with annotated date(s)</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>on_or_before()</code> annotates uncertain start dates by adding ".." as
a prefix to dates (e.g. <code>..1816-01-01</code>).</p>
<p><code>on_or_after()</code> annotates uncertain end dates by adding ".." as
a suffix to dates (e.g. <code>2016-12-31</code>).</p>
<p><code>as_approximate()</code> annotates approximate dates, or date
components, deemed possibly correct by adding "~" to date
(e.g. <code>1916~-01-01</code>)</p>
<p><code>as_uncertain()</code> annotates uncertain dates, or date components,
deemed dubious by adding "?" to date (e.g. <code>1916?-01-01</code>)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1816-01-01"</span>, <span class="st">"1916-01-01"</span>, <span class="st">"2016-01-01"</span><span class="op">)</span>,</span>
<span class="r-in">End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1816-12-31"</span>, <span class="st">"1916-12-31"</span>, <span class="st">"2016-12-31"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Beg</span> <span class="op">&lt;=</span> <span class="st">"1816-01-01"</span>,</span>
<span class="r-in"> <span class="fu">on_or_before</span><span class="op">(</span><span class="va">Beg</span><span class="op">)</span>, <span class="va">Beg</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Beg        End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 ..1816-01-01 1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1916-01-01 1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   2016-01-01 2016-12-31</span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">End</span> <span class="op">&gt;=</span> <span class="st">"2016-01-01"</span>,</span>
<span class="r-in"> <span class="fu">on_or_after</span><span class="op">(</span><span class="va">End</span><span class="op">)</span>, <span class="va">End</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Beg          End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1816-01-01   1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01   1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-01-01 2016-12-31..</span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, Beg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Beg</span> <span class="op">==</span> <span class="st">"1916-01-01"</span>,</span>
<span class="r-in"><span class="fu">as_approximate</span><span class="op">(</span><span class="va">Beg</span><span class="op">)</span>, <span class="va">Beg</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Beg        End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1816-01-01 1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01~ 1916-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2016-01-01 2016-12-31</span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">data</span>, End <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">End</span> <span class="op">==</span> <span class="st">"1916-12-31"</span>,</span>
<span class="r-in"><span class="fu">as_uncertain</span><span class="op">(</span><span class="va">End</span><span class="op">)</span>, <span class="va">End</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Beg         End</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1816-01-01  1816-12-31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1916-01-01 1916-12-31?</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-01-01  2016-12-31</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jameshollway.com" class="external-link">James Hollway</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

